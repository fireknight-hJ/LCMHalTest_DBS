{
  "function_name": "HAL_I2C_Slave_Transmit",
  "replacement_code": "/**\n* @brief  Transmits in slave mode an amount of data in blocking mode (POSIX replacement).\n* @param  hi2c Pointer to a I2C_HandleTypeDef structure that contains\n*                the configuration information for the specified I2C.\n* @param  pData Pointer to data buffer\n* @param  Size Amount of data to be sent\n* @param  Timeout Timeout duration\n* @retval HAL status\n*/\nHAL_StatusTypeDef HAL_I2C_Slave_Transmit(I2C_HandleTypeDef *hi2c, uint8_t *pData, uint16_t Size,\n                                         uint32_t Timeout)\n{\n  uint32_t tickstart;\n  uint16_t tmpXferCount;\n  HAL_StatusTypeDef error;\n\n  if (hi2c->State == HAL_I2C_STATE_READY)\n  {\n    if ((pData == NULL) || (Size == 0U))\n    {\n      hi2c->ErrorCode = HAL_I2C_ERROR_INVALID_PARAM;\n      return  HAL_ERROR;\n    }\n    /* Process Locked */\n    __HAL_LOCK(hi2c);\n\n    /* Init tickstart for timeout management*/\n    tickstart = HAL_GetTick();\n\n    hi2c->State     = HAL_I2C_STATE_BUSY_TX;\n    hi2c->Mode      = HAL_I2C_MODE_SLAVE;\n    hi2c->ErrorCode = HAL_I2C_ERROR_NONE;\n\n    /* Prepare transfer parameters */\n    hi2c->pBuffPtr  = pData;\n    hi2c->XferCount = Size;\n    hi2c->XferISR   = NULL;\n\n    /* Use HAL_BE_Out to simulate data transmission */\n    int result = HAL_BE_Out(Size);\n    if (result < 0)\n    {\n      hi2c->ErrorCode = HAL_I2C_ERROR_TIMEOUT;\n      hi2c->State = HAL_I2C_STATE_READY;\n      hi2c->Mode  = HAL_I2C_MODE_NONE;\n      __HAL_UNLOCK(hi2c);\n      return HAL_ERROR;\n    }\n\n    /* Update buffer pointer and count to simulate transmission completion */\n    hi2c->pBuffPtr += Size;\n    hi2c->XferCount = 0;\n\n    /* Simulate successful transmission completion */\n    hi2c->State = HAL_I2C_STATE_READY;\n    hi2c->Mode  = HAL_I2C_MODE_NONE;\n\n    /* Process Unlocked */\n    __HAL_UNLOCK(hi2c);\n\n    return HAL_OK;\n  }\n  else\n  {\n    return HAL_BUSY;\n  }\n}",
  "reason": "Replaced fwrite, fflush, and stdout usage with HAL_BE_Out helper function to avoid dependency on standard C library functions"
}